<!DOCTYPE html>
<html><head><title>fixturex - index</title><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1.0" name="viewport"><link href="//yui.yahooapis.com/pure/0.5.0-rc-1/pure-min.css" rel="stylesheet" type="text/css"><link href="//yui.yahooapis.com/pure/0.5.0-rc-1/grids-responsive-min.css" rel="stylesheet" type="text/css"><link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" type="text/css"><link href="/fixturex/assets/vm/stylesheets/vm-becf58ee980cbfad6013cf791b1ddc53.css" rel="stylesheet" type="text/css"><link href="/fixturex/assets/images/vm.png" rel="icon" type="image/png"></head><body id="page"><div id="content"><article><h1>fixturex <a href="https://travis-ci.org/RyanMcG/fixturex"><img src="https://travis-ci.org/RyanMcG/fixturex.svg?branch=master" alt="Build Status""/></a></h1><p>A library of helpful test fixture macros and functions for when namespace level fixtures with <code>use-fixtures</code> is not specific enough.</p>
<pre><code class="clojure">;; Add the following to dependencies in your project.clj
[fixturex &quot;0.1.0&quot;]
</code></pre><h6><a href="https://github.com/RyanMcG/fixturex"><strong>Source</strong></a></h6><h6><a href="http://www.ryanmcg.com/fixturex/api/"><strong>API Documentation</strong></a></h6><h2>Usage</h2><p><code>fixturex</code> is meant to make using and defining fixtures in tests just a tiny bit easier. It is a very small and simple library of tiny macros.</p><h3><code>fixturex.higher</code></h3><p>Why am I not introducing the core namespace first? <code>fixturex.higher</code> makes it a bit more concise to define fixtures which is necessary to show off the core part of this library.</p>
<pre><code class="clojure">(use &#39;fixturex.higher)
(before (setup))                       ; → (fn [f#] (setup) (f#))
(after (tear-down))                    ; → (fn [f#] (f#) (tear-down))
(before-and-after (setup) (tear-down)) ; → (fn [f#] (setup) (f#) (tear-down))
(declare ^:dynamic *x*)
(around binding [*x* 1])               ; → (fn [f#] (binding [*x* 1] (f#)))
(with x 1)                             ; → (fn [f#]
                                       ;     (declare x)
                                       ;     (with-redefs [x 1] (f#)))
</code></pre><h3><code>with-fixtures</code></h3><p>The <code>with-fixtures</code> macro can be use to execute some body of code with a sequence of fixtures.</p>
<pre><code class="clojure">(require &#39;[clojure.test :refer [is]])
(with-fixtures [(before (setup))
                (with conn (connect-to-db))
                (with x 1)]
  (do-something conn x)
  (with-fixtures [(with x 2)]
    (is (= x 2)))
  (is (= x 1)))
</code></pre><p>There is also a function version, <code>with-fixtures-fn</code>.</p><h3><code>deftest-fx</code> &amp; <code>testing-fn</code></h3><p><em>fixtures</em> defines <code>deftest-fx</code> and `testing-fn</p>
<pre><code class="clojure">(defn connect-to-db [] ...)
(defn dissconnect-from-db [] ...)
(deftest-fx test-user-creation [(before-and-after (connect-to-db)
                                                  (dissconnect-from-db))]
  ...)
</code></pre><p>They use <code>with-fixtures</code> internally and are just a bit of sugar.</p><h2>License</h2><p>Copyright © 2014 Ryan V McGowan</p><p>Distributed under the Eclipse Public License either version 1.0 or (at your option) any later version.</p></article></div><footer><div class="content"><p id="credit">This website was <a href="https://github.com/RyanMcG/incise">incised</a>.</p></div><script type="text/javascript">//<![CDATA[
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47124253-1', 'ryanmcg.com');
  ga('send', 'pageview');
//]]></script></footer><script src="/fixturex/assets/vm/javascripts/vm-ad1d9408118b0c985b41719f958850ea.js" type="text/javascript"></script></body></html>